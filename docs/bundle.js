(()=>{"use strict";var e={56:(e,t,a)=>{e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function a(e){for(var a=-1,r=0;r<t.length;r++)if(t[r].identifier===e){a=r;break}return a}function r(e,r){for(var i={},s=[],o=0;o<e.length;o++){var c=e[o],l=r.base?c[0]+r.base:c[0],h=i[l]||0,u="".concat(l," ").concat(h);i[l]=h+1;var p=a(u),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var d=n(m,r);r.byIndex=o,t.splice(o,0,{identifier:u,updater:d,references:1})}s.push(u)}return s}function n(e,t){var a=t.domAPI(t);return a.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,n){var i=r(e=e||[],n=n||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var o=a(i[s]);t[o].references--}for(var c=r(e,n),l=0;l<i.length;l++){var h=a(i[l]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}i=c}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",r=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),r&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),r&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,r,n,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var h=[].concat(e[l]);r&&s[h[0]]||(void 0!==i&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=i),a&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=a):h[2]=a),n&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=n):h[4]="".concat(n)),t.push(h))}},t}},386:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(601),n=a.n(r),i=a(314),s=a.n(i)()(n());s.push([e.id,'html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:"";content:none}table{border-collapse:collapse;border-spacing:0}html{font-size:10px;font-family:"Roboto",sans-serif}#wrapper{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:50px}#wrapper #hiraganaGame{width:1400px;min-height:500px;margin:60px auto 0;padding-left:20px;padding-right:20px;padding-bottom:50px;border:5px solid #040461;border-radius:10px;box-shadow:0px 9px 25px 5px #040461;font-size:2rem}#wrapper #hiraganaGame h1{text-align:center;font-size:3rem;color:#040461;margin:25px 0;letter-spacing:2px;text-transform:uppercase;font-weight:500}#wrapper .gameForm{display:flex;flex-direction:column;gap:20px;margin-top:40px}#wrapper .gameForm fieldset{display:flex;gap:20px}#wrapper .gameForm fieldset>label{text-transform:capitalize}#wrapper .gameForm fieldset>div{flex-basis:40}#wrapper .gameForm fieldset>div>label input{margin-right:10px}#wrapper .gameForm__chapters{flex-wrap:wrap;justify-content:space-evenly;align-items:center}#wrapper .gameForm__chapters label{flex-basis:100%}#wrapper .gameForm__chapters_checkbox{flex-basis:32%}#wrapper .gameForm__chapters_checkbox label{font-size:2.2rem;line-height:1.3}#wrapper .gameForm button{width:60%;margin:20px auto 0;padding:15px 0;font-size:2rem;font-weight:500;letter-spacing:4px;text-transform:uppercase;cursor:pointer;border:none;border-radius:10px;background:#040461;color:#fff;transition:.5s;transform-origin:center}#wrapper .gameForm button:hover{letter-spacing:10px}.table{border:2px solid #000;max-width:1200px}.table-header{margin-top:10px;margin-bottom:20px}.table-header h2{text-align:center;text-transform:uppercase;letter-spacing:3px;font-weight:400;font-size:3rem}.table-body{width:100%;margin-bottom:20px;column-gap:5px;row-gap:10px}.table-cell{min-width:70px;display:flex;align-items:center;justify-content:center;flex-direction:column}.table-cell span{display:inline-block}.table-cell span:nth-child(1){font-family:"Noto Sans JP","Roboto",sans-serif;font-size:2.6rem;font-weight:400}.table-cell span:nth-child(2){font-size:1.9rem;font-weight:300}.gameContainer{margin-top:50px}.gameContainer form{display:flex;flex-direction:column;margin-top:30px}.gameContainer form h2{flex-basis:80%;font-size:3rem;text-align:center;margin-bottom:20px}.gameContainer form h2 span{font-family:"Noto Sans JP",sans-serif;font-weight:600}.gameContainer form fieldset{display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.gameContainer form fieldset label{display:none}.gameContainer form fieldset>div{flex-basis:40%;display:flex;align-items:center;justify-content:center}.gameContainer form fieldset>div label{width:100%;display:flex;justify-content:center;align-items:center;font-size:2.5rem;line-height:4rem;cursor:pointer}.gameContainer form fieldset>div label input{display:block;position:relative;border:0px;height:2rem;width:2rem;margin-right:10px;cursor:pointer}.gameContainer form button{flex-basis:51%;align-self:center;justify-self:center;margin:20px auto 0;padding:10px 20px;background:none;border:none;font-size:2rem;text-transform:uppercase;cursor:pointer;border:3px solid #040461;border-radius:5px;transition:.5s}.gameContainer form button:hover{background-color:#040461;color:#fff}.gameContainer .game__questionCounter{border-bottom:1px solid #040461;width:200px;text-align:center}.gameContainer .game__result{text-align:center;width:100%}.gameContainer .game__result h3{font-size:6rem;text-align:center;letter-spacing:5px}.gameContainer .game__result p{margin-top:25px;font-size:3rem;text-align:center}.gameContainer .game__result button{width:60%;margin:50px auto 0;padding:15px 0;font-size:2rem;font-weight:500;letter-spacing:4px;text-transform:uppercase;cursor:pointer;border:none;border-radius:10px;background:#040461;color:#fff;transition:.5s;transform-origin:center}.gameContainer .game__result button:hover{letter-spacing:8px}.playerStats{width:90%;margin:40px auto 0;padding:25px 0;display:flex;flex-wrap:wrap;justify-content:space-evenly;align-items:flex-start;border-radius:10px;color:#f9f9f9;background-color:#040461;font-family:"Genos",sans-serif;gap:25px}.playerStats h2{flex-basis:100%;font-size:2.8rem;margin-bottom:1rem;text-transform:uppercase;text-align:center;font-weight:400;letter-spacing:1px}.playerStats>div{display:flex;flex-basis:40%;flex-wrap:wrap;flex-direction:column;justify-content:center;gap:5px}.playerStats>div>h3{margin-bottom:5px;text-align:center;font-size:2.4rem;font-weight:600;letter-spacing:1px}.playerStats>div>p{font-size:2.1rem;font-weight:400;text-transform:uppercase}',""]);const o=s},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,a){var r=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(a)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var r="";a.supports&&(r+="@supports (".concat(a.supports,") {")),a.media&&(r+="@media ".concat(a.media," {"));var n=void 0!==a.layer;n&&(r+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),r+=a.css,n&&(r+="}"),a.media&&(r+="}"),a.supports&&(r+="}");var i=a.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,a),i.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.nc=void 0;var r,n,i,s,o=a(72),c=a.n(o),l=a(825),h=a.n(l),u=a(659),p=a.n(u),m=a(56),d=a.n(m),f=a(540),g=a.n(f),y=a(113),$=a.n(y),A=a(386),k={};function w(e,t,a){var r=document.createElement("fieldset");r.classList.add(e);var n=document.createElement("label");return n.htmlFor=a,n.textContent="".concat(a,": "),r.appendChild(n),t.appendChild(r),r}function v(e){var t,a=e.form,r=e.fieldset,n=e.className,i=e.type,s=e.name,o=e.required,c=e.elements,l=e.labels,h=e.selectAll;if(t=r||w(n,a,s),c.forEach((function(e,a){var r=document.createElement("div");r.classList.add(n+"_"+i);var c=document.createElement("input");c.type=i,c.id=e,c.name=s,c.value=e,c.required=!!o;var h=document.createElement("label");if(h.htmlFor=e,h.appendChild(c),l){var u=document.createTextNode(l[a]);h.appendChild(u)}else"text"===i?c.value="":(u=document.createTextNode(e),h.appendChild(u));r.appendChild(h),t.appendChild(r)})),h){var u=document.createElement("div");u.classList.add(n+"_"+i),u.classList.add("selectAllWrapper");var p=document.createElement("input");p.type="checkbox",p.id="selectAll",p.name="selectAll",p.value="selectAll",p.required=!1;var m=document.createElement("label");m.htmlFor="selectAll";var d=document.createTextNode("Select All");m.appendChild(p),m.appendChild(d),u.appendChild(m),t.appendChild(u),u.addEventListener("click",(function(){t.querySelectorAll('input[type="checkbox"]').forEach((function(e){e!==p&&(e.checked=p.checked)}))}))}return t}function b(e,t,a){var r=document.createElement("button");return r.type=a,r.textContent=t,e.appendChild(r),r}k.styleTagTransform=$(),k.setAttributes=d(),k.insert=p().bind(null,"head"),k.domAPI=h(),k.insertStyleElement=g(),c()(A.A,k),A.A&&A.A.locals&&A.A.locals,function(e){e.TO_JAPANESE="japanese",e.TO_ROMAJI="romaji",e.MIXED="mixed"}(r||(r={})),function(e){e.EASY="easy",e.MEDIUM="medium",e.HARD="hard",e.EXTREME="extreme"}(n||(n={})),function(e){e.HIRAGANA="hiragana",e.KATAKANA="katakana",e.MIXED="both"}(i||(i={})),function(e){e.START="start",e.END="end"}(s||(s={}));var x="gameForm",j="gameForm__chapters",S=function(){function e(e){var t=e.parent,a=e.sets,s=e.onPregameFormSubmit,o=e.isPlayer;this.$answersDirection=[r.TO_ROMAJI,r.TO_JAPANESE,r.MIXED],this.$difficultyLevels=[n.EASY,n.MEDIUM,n.HARD,n.EXTREME],this.$syllabaryLevels=[i.HIRAGANA,i.KATAKANA,i.MIXED],this.$sets=a,this.$parent=t,this.$form=null,this.$onPregameFormSubmit=s,this.$isPlayer=o,this.$chaptersContainer=null}return e.prototype.render=function(){this.createForm()},e.prototype.unmount=function(){var e;null===(e=this.$form)||void 0===e||e.remove(),this.$form=null},e.prototype.createForm=function(){if(!this.$form){var e=document.createElement("form");e.id=x,e.classList.add(x),this.$parent.appendChild(e),this.$form=e,!this.$isPlayer&&this.renderUsernameInput(e),this.renderAnswersDirectionSelection(e),this.renderDifficultySelection(e),this.renderSyllabarySelection(e),this.createChaptersContainer(e),this.renderGameButton(e),e.addEventListener("submit",this.handleFormSubmit.bind(this))}},e.prototype.renderUsernameInput=function(e){v({form:e,className:"gameForm__username",type:"text",name:"username",required:!0,elements:["username"],selectAll:!1})},e.prototype.renderAnswersDirectionSelection=function(e){var t=this;v({form:e,className:"gameForm__answersDirection",type:"radio",name:"answersDirection",required:!0,elements:this.$answersDirection,selectAll:!1}).addEventListener("change",(function(e){var a=e.target;t.$selectedAnswersDirection=a.value,t.renderChaptersSelection()}))},e.prototype.renderDifficultySelection=function(e){v({form:e,className:"gameForm__difficulty",type:"radio",name:"difficulty",required:!0,elements:this.$difficultyLevels,selectAll:!1})},e.prototype.renderSyllabarySelection=function(e){var t=this;v({form:e,className:"gameForm__syllabary",type:"radio",name:"syllabary",required:!0,elements:this.$syllabaryLevels,selectAll:!1}).addEventListener("change",(function(e){var a=e.target;t.$selectedSyllabary=a.value,t.renderChaptersSelection()}))},e.prototype.createChaptersContainer=function(e){var t=w(j,e,"chapters");this.$chaptersContainer=t},e.prototype.renderChaptersSelection=function(){var e,t=this;if(this.$selectedAnswersDirection&&this.$selectedSyllabary){Array.from(null===(e=this.$chaptersContainer)||void 0===e?void 0:e.children).forEach((function(e,t){0!==t&&e.remove()}));var a=Object.keys(this.$sets),n=[],s=[];a.forEach((function(e){s.length=0,t.$sets[e].forEach((function(e){if(t.$selectedAnswersDirection===r.TO_JAPANESE)s.push(e.romaji);else switch(t.$selectedSyllabary){case i.HIRAGANA:s.push(e.hiragana);break;case i.KATAKANA:s.push(e.katakana);break;case i.MIXED:s.push(e.hiragana,e.katakana)}})),n.push("(".concat(s.join(", "),")"))})),v({form:this.$form,fieldset:this.$chaptersContainer,className:j,type:"checkbox",name:"chapters",required:!1,elements:a,labels:n,selectAll:!0})}},e.prototype.renderGameButton=function(e){b(e,"Start Game","submit")},e.prototype.handleFormSubmit=function(e){e.preventDefault();var t=e.target,a=new FormData(t),r=a.get("username"),n=a.get("answersDirection"),i=a.get("difficulty"),s=a.getAll("chapters"),o=a.get("syllabary");0!==s.length?(this.unmount(),this.$onPregameFormSubmit(r,n,i,o,s)):alert("Pick at least one chapter")},e}();const C=S;var E=function(){function e(e,t,a,r,n){this.$container=n,this.$question=e,this.$answersDirection=t,this.$answers=a,this.$checkAnswer=r,this.$form=null}return e.prototype.render=function(){this.$form||this.createForm(),this.renderQuestion(),this.renderAnswers(),this.renderSubmitButton()},e.prototype.createForm=function(){var e=this,t=document.createElement("form");t.classList.add("game__question"),this.$form=t,this.$container.appendChild(t),t.addEventListener("submit",(function(t){return e.handleSubmit(t)}))},e.prototype.renderQuestion=function(){if(this.$form){var e=document.createElement("h2");e.innerHTML="What is the translation for: <span>".concat(this.$question,"</span>?"),this.$form.appendChild(e)}else console.error("Question container not found")},e.prototype.renderAnswers=function(){v({form:this.$form,className:"game__answer",type:"radio",name:"answer",required:!0,elements:this.$answers,selectAll:!1})},e.prototype.renderSubmitButton=function(){b(this.$form,"submit","submit")},e.prototype.handleSubmit=function(e){e.preventDefault();var t=e.target,a=new FormData(t).get("answer");a?this.$checkAnswer(a):alert("Please select an answer!")},e}();const T=E;function D(e){for(var t,a=e.length-1;a>0;a--){var r=Math.floor(Math.random()*(a+1));t=[e[r],e[a]],e[a]=t[0],e[r]=t[1]}return e}var R=function(){function e(e,t,a){console.log(t),this.$container=e,this.$question=t.question,this.$answersDirection=t.answersDirection,this.$correctAnswer=t.correctAnswer,this.$syllabary=t.syllabary,this.$distractors=t.distractors,this.$onQuestionAnswered=a}return e.prototype.render=function(){new T(this.$question,this.$answersDirection,this.generateShuffledAnswers(),this.validateAnswer.bind(this),this.$container).render()},e.prototype.generateShuffledAnswers=function(){return D(function(e,t,a){if(a||2===arguments.length)for(var r,n=0,i=t.length;n<i;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([this.$correctAnswer],this.$distractors,!0))},e.prototype.validateAnswer=function(e){e===this.$correctAnswer?(console.log("GOOD ANSWER"),this.$onQuestionAnswered(!0,e,this.$answersDirection,this.$syllabary)):(console.log("WRONG ANSWER"),this.$onQuestionAnswered(!1,e,this.$answersDirection,this.$syllabary))},e}();const _=R;function N(e,t){var a=document.createElement("p");return a.textContent=e,t.appendChild(a),a}const G=function(){function e(){}return e.prototype.start=function(){setTimeout((function(){console.log("time is up")}),3e3)},e.prototype.stop=function(){},e}();var M=function(){function e(e,t,a,r,n,i,s){this.$questionsData=t,this.$appContainer=e,this.$getCurrentQuestion=a,this.$getScore=r,this.$onQuestionAnswered=n,this.$getGameTime=i,this.$onPlayAgain=s,this.$gameContainer=this.createGameContainer(),this.$questionCounter=this.renderQuestionCounter()}return e.prototype.render=function(){this.$getCurrentQuestion()>=this.$questionsData.length?this.displayResults():(this.$gameContainer.replaceChildren(),this.renderQuestionCounter(),this.createQuestion())},e.prototype.createGameContainer=function(){var e=document.createElement("div");return e.classList.add("gameContainer"),this.$appContainer.appendChild(e),e},e.prototype.renderTimer=function(){document.createElement("div").classList.add("game__timer"),(new G).start()},e.prototype.renderQuestionCounter=function(){this.$questionsData&&0!==this.$questionsData.length||console.error("No questions available."),this.$questionCounter&&(this.$questionCounter.textContent="Question ".concat(this.$getCurrentQuestion()+1," of ").concat(this.$questionsData.length));var e=document.createElement("h3");return e.setAttribute("role","status"),e.classList.add("game__questionCounter"),e.textContent="Question ".concat(this.$getCurrentQuestion()+1," of ").concat(this.$questionsData.length),this.$gameContainer.appendChild(e),e},e.prototype.createQuestion=function(){var e=this.$getCurrentQuestion(),t={syllabary:this.$questionsData[e].syllabary,question:this.$questionsData[e].question,answersDirection:this.$questionsData[e].answersDirection,correctAnswer:this.$questionsData[e].correctAnswer,distractors:this.$questionsData[e].distractors};new _(this.$gameContainer,t,this.$onQuestionAnswered).render(),this.renderTimer()},e.prototype.renderNextQuestion=function(){this.render()},e.prototype.calculateTimeSpent=function(){var e=this.$questionsData.length,t=this.$getGameTime();return(60*t.minutes+t.seconds+t.milliseconds/1e3)/e},e.prototype.displayResults=function(){var e=this;this.$gameContainer.replaceChildren();var t=document.createElement("div");t.classList.add("game__result");var a=document.createElement("h3");t.appendChild(a),this.$gameContainer.appendChild(t),a.textContent="".concat((this.$getScore()/this.$questionsData.length*100).toFixed(2),"%!"),N("You scored ".concat(this.$getScore()," points out of ").concat(this.$questionsData.length," possible!"),t);var r=this.$getGameTime();N("It took you ".concat(r.minutes," minutes, ").concat(r.seconds," seconds and ").concat(r.milliseconds," milliseconds to finish the game."),t);var n=this.calculateTimeSpent();N("You spent ".concat(n.toFixed(2)," seconds per question."),t);var i=document.createElement("button");i.textContent="Play again!",i.classList.add("game__restartButton"),i.addEventListener("click",(function(){e.$onPlayAgain()})),t.appendChild(i)},e}();const q=M;var J=function(e,t,a){if(a||2===arguments.length)for(var r,n=0,i=t.length;n<i;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},I=function(){function e(e,t,a,r,n){this.$answersDirection=e,this.$difficulty=t,this.$chapters=r,this.$sets=n,this.$syllabary=a}return e.prototype.createQuestions=function(){var e=this,t=this.$chapters.map((function(t){return e.$sets[t]})).flat(),a=[];return t.forEach((function(r){e.addQuestion(a,r,t)})),D(a)},e.prototype.addQuestion=function(e,t,a){switch(this.$answersDirection){case r.TO_JAPANESE:this.createRomajiQuestion(e,t,a);break;case r.TO_ROMAJI:this.createJapaneseQuestion(e,t,a);break;case r.MIXED:this.createMixedQuestion(e,t,a)}},e.prototype.createRomajiQuestion=function(e,t,a){switch(this.$syllabary){case i.HIRAGANA:e.push({syllabary:i.HIRAGANA,answersDirection:r.TO_JAPANESE,question:t.romaji,correctAnswer:t.hiragana,distractors:this.createJapaneseDistractors(a,i.HIRAGANA,t.hiragana)});break;case i.KATAKANA:e.push({syllabary:i.KATAKANA,answersDirection:r.TO_JAPANESE,question:t.romaji,correctAnswer:t.katakana,distractors:this.createJapaneseDistractors(a,i.KATAKANA,t.katakana)});break;case i.MIXED:e.push({syllabary:i.HIRAGANA,answersDirection:r.TO_JAPANESE,question:t.romaji,correctAnswer:t.hiragana,distractors:this.createJapaneseDistractors(a,i.HIRAGANA,t.hiragana)}),e.push({syllabary:i.KATAKANA,answersDirection:r.TO_JAPANESE,question:t.romaji,correctAnswer:t.katakana,distractors:this.createJapaneseDistractors(a,i.KATAKANA,t.katakana)})}},e.prototype.createJapaneseQuestion=function(e,t,a){var n=this.createRomajiDistractors(a,t.romaji);switch(this.$syllabary){case i.HIRAGANA:e.push({syllabary:i.HIRAGANA,answersDirection:r.TO_ROMAJI,question:t.hiragana,correctAnswer:t.romaji,distractors:n});break;case i.KATAKANA:e.push({syllabary:i.KATAKANA,answersDirection:r.TO_ROMAJI,question:t.katakana,correctAnswer:t.romaji,distractors:n});break;case i.MIXED:e.push({syllabary:i.HIRAGANA,answersDirection:r.TO_ROMAJI,question:t.hiragana,correctAnswer:t.romaji,distractors:n}),e.push({syllabary:i.KATAKANA,answersDirection:r.TO_ROMAJI,question:t.katakana,correctAnswer:t.romaji,distractors:n})}},e.prototype.createMixedQuestion=function(e,t,a){},e.prototype.createRomajiDistractors=function(e,t){var a=Object.values(this.$sets).flatMap((function(e){return e.map((function(e){return e.romaji}))})).filter((function(e){return e!==t}));switch(this.$difficulty){case n.EASY:break;case n.MEDIUM:a=e.map((function(e){return e.romaji})).filter((function(e){return e!==t}));break;case n.HARD:return D(a=a.filter((function(e){if(1===t.length)return e.includes(t[0]);if(2===t.length){var a=t[0],r=t[1];return e.includes(a)||e.includes(r)}if(3===t.length){a=t[0],r=t[1];var n=t[2];return e.includes(a)||e.includes(r)||e.includes(n)}}))).slice(0,5)}return D(a).slice(0,3)},e.prototype.createJapaneseDistractors=function(e,t,a){var r;switch(this.$difficulty){case n.EASY:r=e.map((function(e){return e[t]})).filter((function(e){return e!==a}));break;case n.MEDIUM:r=Object.values(this.$sets).flatMap((function(e){return e.map((function(e){return e[t]}))})).filter((function(e){return e!==a}));break;default:return this.$syllabary===i.MIXED&&(r=Object.values(this.$sets).flatMap((function(e){return J(J([],e.filter((function(e){return e.hiragana!==a&&e.katakana!==a})).map((function(e){return e.hiragana})),!0),e.filter((function(e){return e.katakana!==a&&e.hiragana!==a})).map((function(e){return e.katakana})),!0)})).filter((function(e){return e!==a}))),D(r).slice(0,5)}return D(r).slice(0,3)},e}();const P=I;var O=function(){function e(e,t,a,r,n,i,s,o){this.$player=e,this.$difficulty=a,this.$syllabary=r,this.$chapters=n,this.$gameId=this.createGameId(),this.$appContainer=i,this.$sets=s,this.$questionsData=new P(t,a,r,n,s).createQuestions(),this.$length={start:0,end:0},this.$score=0,this.$currentQuestion=0,this.$gameRenderer=new q(this.$appContainer,this.$questionsData,this.getCurrentQuestion.bind(this),this.getScore.bind(this),this.onQuestionAnswered.bind(this),this.getGameTime.bind(this),o),this.$answeredCorrectly={toJapanese:{hiragana:[],katakana:[]},toRomaji:{hiragana:[],katakana:[]}},this.$answeredWrong={toJapanese:{hiragana:[],katakana:[]},toRomaji:{hiragana:[],katakana:[]}}}return e.prototype.render=function(){this.$gameRenderer.render(),this.setGameTime(s.START)},e.prototype.getScore=function(){return this.$answeredCorrectly.toJapanese.hiragana.length+this.$answeredCorrectly.toJapanese.katakana.length+this.$answeredCorrectly.toRomaji.hiragana.length+this.$answeredCorrectly.toRomaji.katakana.length},e.prototype.getGameId=function(){return this.$gameId},e.prototype.getCurrentQuestion=function(){return this.$currentQuestion},e.prototype.setGameTime=function(e){switch(e){case s.START:this.$length.start=Date.now();break;case s.END:this.$length.end=Date.now()}},e.prototype.incrementCurrentQuestion=function(){this.$currentQuestion++},e.prototype.createGameId=function(){if(!this.$player)throw new Error("Player not found");return"".concat(this.$player.getName(),"-").concat(this.$difficulty,"-").concat(this.$syllabary,"-").concat(this.$chapters.at(0),"-").concat(this.$chapters.length,"-").concat(Date.now())},e.prototype.getGameTime=function(){if(0===this.$length.start||0===this.$length.end)throw new Error("Game time not set");var e=this.$length.end-this.$length.start;return{minutes:Math.floor(e/1e3/60),seconds:Math.floor(e/1e3%60),milliseconds:Math.floor(e%1e3/10)}},e.prototype.isGameFinished=function(){return this.$currentQuestion>=this.$questionsData.length},e.prototype.onQuestionAnswered=function(e,t,a,n){if(e)switch(a){case r.TO_JAPANESE:switch(n){case i.HIRAGANA:this.$answeredCorrectly.toJapanese.hiragana.push(t);break;case i.KATAKANA:this.$answeredCorrectly.toJapanese.katakana.push(t)}break;case r.TO_ROMAJI:switch(n){case i.HIRAGANA:this.$answeredCorrectly.toRomaji.hiragana.push(t);break;case i.KATAKANA:this.$answeredCorrectly.toRomaji.katakana.push(t)}}else switch(a){case r.TO_JAPANESE:switch(n){case i.HIRAGANA:this.$answeredWrong.toJapanese.hiragana.push(t);break;case i.KATAKANA:this.$answeredWrong.toJapanese.katakana.push(t)}case r.TO_ROMAJI:switch(n){case i.HIRAGANA:this.$answeredWrong.toRomaji.hiragana.push(t);break;case i.KATAKANA:this.$answeredWrong.toRomaji.katakana.push(t)}}if(this.incrementCurrentQuestion(),this.isGameFinished()){this.setGameTime(s.END);var o={id:this.$gameId,time:this.getGameTime(),answersDirection:a,difficulty:this.$difficulty,questionsCount:this.$questionsData.length,correctAnswers:this.$answeredCorrectly,wrongAnswers:this.$answeredWrong};console.log(o),this.$player.addGameStatistics(o),this.$gameRenderer.displayResults()}else this.$gameRenderer.renderNextQuestion()},e}();const Q=O;var F=function(e){if("number"==typeof e){var t=Math.floor(e/6e4),a=Math.floor(e%6e4/1e3),r=Math.floor(e%1e3/10);return"".concat(t,":").concat(a<10?"0":"").concat(a,".").concat(r<10?"0":"").concat(r)}return"".concat(e.minutes,":").concat(e.seconds<10?"0":"").concat(e.seconds,".").concat(e.milliseconds<10?"0":"").concat(e.milliseconds)};const L=function(){function e(e,t){this.$playerName=t,this.$games=e}return e.prototype.getTotalTime=function(){return Array.from(this.$games.values()).reduce((function(e,t){return e.minutes+=t.time.minutes,e.seconds+=t.time.seconds,e.milliseconds+=t.time.milliseconds,e.milliseconds>=1e3&&(e.seconds+=Math.floor(e.milliseconds/1e3),e.milliseconds%=1e3),e.seconds>=60&&(e.minutes+=Math.floor(e.seconds/60),e.seconds%=60),e}),{minutes:0,seconds:0,milliseconds:0})},e.prototype.getAverageTime=function(){var e,t=this.getTotalTime(),a=this.$games.size,r="number"==typeof(e=t)?{minutes:Math.floor(e/6e4),seconds:Math.floor(e%6e4/1e3),milliseconds:Math.floor(e%1e3/10)}:60*e.minutes*1e3+1e3*e.seconds+e.milliseconds,n=r/Array.from(this.$games.values()).reduce((function(e,t){return e+t.questionsCount}),0);return{perGame:F(r/a),perQuestion:F(n)}},e.prototype.getGeneralStats=function(){var e=this.calculateAnswersStats().correctAnswers,t=this.calculateAnswersStats().wrongAnswers;return{games:this.$games.size,correctAnswers:e,wrongAnswers:t,accuracy:this.getAccuracy(e,t),timeSpent:this.getTotalTime(),averageTime:this.getAverageTime()}},e.prototype.getJapaneseToRomajiStats=function(){return{games:this.calculateGames(r.TO_ROMAJI).toRomaji,correctAnswers:0,wrongAnswers:0,accuracy:"",timeSpent:{minutes:0,seconds:0,milliseconds:0},averageTime:{perGame:"",perQuestion:""}}},e.prototype.getRomajiToJapaneseStats=function(){return{games:this.calculateGames(r.TO_JAPANESE).toJapanese,correctAnswers:0,wrongAnswers:0,accuracy:"",timeSpent:{minutes:0,seconds:0,milliseconds:0},averageTime:{perGame:"",perQuestion:""}}},e.prototype.calculateAnswersStats=function(){return{correctAnswers:Array.from(this.$games.values()).reduce((function(e,t){return e+(t.correctAnswers.toJapanese.hiragana.length+t.correctAnswers.toJapanese.katakana.length+t.correctAnswers.toRomaji.hiragana.length+t.correctAnswers.toRomaji.katakana.length)}),0),wrongAnswers:Array.from(this.$games.values()).reduce((function(e,t){return e+(t.wrongAnswers.toJapanese.hiragana.length+t.wrongAnswers.toJapanese.katakana.length+t.wrongAnswers.toRomaji.hiragana.length+t.wrongAnswers.toRomaji.katakana.length)}),0)}},e.prototype.getAccuracy=function(e,t){return(e/(e+t)*100).toFixed(2)+"%"},e.prototype.calculateGames=function(e){return Array.from(this.$games.values()).reduce((function(e,t){switch(t.answersDirection){case r.TO_JAPANESE:e.toJapanese++;break;case r.TO_ROMAJI:e.toRomaji++;break;case r.MIXED:e.mixed++}return e}),{toRomaji:0,toJapanese:0,mixed:0})},e.prototype.getStats=function(){return{general:this.getGeneralStats(),japaneseToRomaji:this.getJapaneseToRomajiStats(),romajiToJapanese:this.getRomajiToJapaneseStats(),specificCharactersStats:{}}},e}(),K=function(){function e(e){this.$answers={correct:0,wrong:0},this.$score=0,this.$playerStats=null,this.$name=e,this.$answers={correct:0,wrong:0},this.$score=this.calculateScore(),this.$games=new Map,this.$playerStats=null}return e.loadFromLocalStorage=function(){var t=localStorage.getItem("playerData");if(!t)return null;var a=JSON.parse(t),r=a.name,n=a.games,i=new e(r),s=new Map(n);i.$games=s;var o=new L(s,r);return i.$playerStats=o,i},e.prototype.getName=function(){return this.$name},e.prototype.saveToLocalStorage=function(){var e={name:this.$name,games:Array.from(this.$games.entries())};localStorage.setItem("playerData",JSON.stringify(e))},e.prototype.addGameStatistics=function(e){if(-1===e.id.indexOf(this.$name))throw new Error("Game ID does not match player name");if(this.$games.set(this.$games.size,e),!this.$playerStats){var t=new L(this.$games,this.$name);this.$playerStats=t}this.saveToLocalStorage()},e.prototype.calculateScore=function(){return this.$score=this.$answers.correct,this.$score},e}();var H=function(e,t,a,r){var n=document.createElement("div");n.classList.add(e),t.appendChild(n);var i=document.createElement(a);return i.classList.add("".concat(e,"-title")),i.innerText=r,n.appendChild(i),n},z=function(){function e(e,t,a){this.$name=e,this.$stats=a,this.$container=t,this.$wrapper=null}return e.prototype.render=function(){this.createStatsElements()},e.prototype.unmount=function(){this.$wrapper&&this.$wrapper.remove()},e.prototype.createStatsElements=function(){var e=H("playerStats",this.$container,"h2","".concat(this.$name,"'s stats"));this.$wrapper=e,this.renderGeneralStats(e),this.renderAverageStats(e),this.renderJapaneseToRomajiStats(e),this.renderRomajiToJapaneseStats(e),this.$stats.mixed&&this.renderMixedStats(e)},e.prototype.renderGeneralStats=function(e){var t=H("playerStats__general",e,"h3","General");N("Games played: ".concat(this.$stats.general.games),t),N("Questions answered: ".concat(this.$stats.general.correctAnswers+this.$stats.general.wrongAnswers),t),N("Correct answers: ".concat(this.$stats.general.correctAnswers),t),N("Wrong answers: ".concat(this.$stats.general.wrongAnswers),t),N("Accuracy: ".concat(this.$stats.general.accuracy),t),N("Total time: ".concat(this.$stats.general.timeSpent.minutes,"m ").concat(this.$stats.general.timeSpent.seconds,"s ").concat(this.$stats.general.timeSpent.milliseconds,"ms"),t)},e.prototype.renderAverageStats=function(e){var t=this,a=H("playerStats__average",e,"h3","Average");N("0:"===t.$stats.general.averageTime.perGame.slice(0,2)?"time per game: ".concat(t.$stats.general.averageTime.perGame.slice(2),"s"):"time per game: ".concat(t.$stats.general.averageTime.perGame,"min"),a),N("time per question: ".concat(this.$stats.general.averageTime.perQuestion.slice(2),"s"),a)},e.prototype.createHirKatParagraphs=function(e,t){N("Games played: ".concat(t.games?t.games:""),e),N("Hiragana correct answers: ",e),N("Hiragana wrong answers: ",e),N("Hiragana accuracy:",e),N("Katakana correct answers: ",e),N("Katakana wrong answers: ",e),N("Katakana accuracy:",e)},e.prototype.renderJapaneseToRomajiStats=function(e){var t=H("playerStats__japanese",e,"h3","Japanese to Romaji");this.createHirKatParagraphs(t,this.$stats.japaneseToRomaji)},e.prototype.renderRomajiToJapaneseStats=function(e){var t=H("playerStats__romaji",e,"h3","Romaji to Japanese");this.createHirKatParagraphs(t,this.$stats.romajiToJapanese)},e.prototype.renderMixedStats=function(e){var t=H("playerStats__mixed",e,"h3","Mixed");this.createHirKatParagraphs(t,this.$stats.mixed)},e}();const W=z;var X=function(){function e(e){this.$currentPlayer=null,this.$playerStats=null,this.$container=null,this.$sets=e,this.$currentPlayer=K.loadFromLocalStorage(),this.$game=null,this.$playerStats=null}return e.prototype.setCurrentPlayer=function(e){this.$currentPlayer=e,e.saveToLocalStorage()},e.prototype.setGame=function(e){this.$game=e},e.prototype.render=function(){var e;if(this.$game)this.$playerStats&&this.$playerStats.unmount(),this.renderGame(this.$game);else{if(this.$container)for(;this.$container.children.length>1;)null===(e=this.$container.lastChild)||void 0===e||e.remove();else this.$container=this.createGameWindow();this.renderPreGameForm(this.$container),this.$currentPlayer&&(console.log("Im HERE"),this.renderPlayerStats())}},e.prototype.createGameWindow=function(){var e=document.createElement("div");e.id="wrapper",document.body.appendChild(e);var t=document.createElement("div");t.id="hiraganaGame",e.appendChild(t);var a=document.createElement("h1");return a.textContent=this.$currentPlayer?"".concat(this.$currentPlayer.getName(),"'s Learning Japanese"):"Learning Japanese",t.appendChild(a),t},e.prototype.renderPreGameForm=function(e){new C({parent:e,sets:this.$sets,onPregameFormSubmit:this.onPregameFormSubmit.bind(this),isPlayer:!!this.$currentPlayer}).render()},e.prototype.renderGame=function(e){var t,a=document.querySelector("h1");a&&(a.textContent="".concat(null===(t=this.$currentPlayer)||void 0===t?void 0:t.getName(),"'s learning japanese")),e.render()},e.prototype.renderPlayerStats=function(){console.log(this.$currentPlayer);var e=this.$currentPlayer.$playerStats;console.log(e);var t=new W(this.$currentPlayer.$name,this.$container,e.getStats());this.$playerStats=t,t.render()},e.prototype.onPregameFormSubmit=function(e,t,a,r,n){if(!this.$currentPlayer){var i=new K(e);this.setCurrentPlayer(i)}var s=new Q(this.$currentPlayer,t,a,r,n,this.$container,this.$sets,this.onPlayAgain.bind(this));this.setGame(s),this.render()},e.prototype.onPlayAgain=function(){this.$game=null,this.render()},e}();const U=X;var B=function(){function e(e,t,a){this.$container=e,this.$header=t,this.$data=a}return e.prototype.render=function(){var e=this,t=Object.keys(this.$data[Object.keys(this.$data)[0]]).length,a=Object.keys(this.$data).length,r=document.createElement("div");r.classList.add("table"),this.$container.appendChild(r);var n=document.createElement("div");n.classList.add("table-header"),n.innerHTML="<h2>".concat(this.$header,"</h2>"),r.appendChild(n);var i=document.createElement("div");i.classList.add("table-body"),i.style.display="grid",i.style.gridTemplateColumns="repeat(".concat(a,", 1fr)"),i.style.gridTemplateRows="repeat(".concat(t,", 1fr)"),r.appendChild(i);var s=function(t){o.$data[t].forEach((function(a,r){var n=document.createElement("div"),s=document.createElement("span"),o=document.createElement("span");n.appendChild(s),n.appendChild(o),n.classList.add("table-cell"),n.style.gridArea="".concat(r+1," / ").concat(parseInt(t)," / ").concat(r+2," / ").concat(parseInt(t)+1),s.innerHTML=a[e.$header],o.innerHTML=a.romaji,i.appendChild(n)}))},o=this;for(var c in this.$data)s(c)},e}();const Y=B;var V={1:{hiragana:"あ",katakana:"ア",romaji:"a"},2:{hiragana:"い",katakana:"イ",romaji:"i"},3:{hiragana:"う",katakana:"ウ",romaji:"u"},4:{hiragana:"え",katakana:"エ",romaji:"e"},5:{hiragana:"お",katakana:"オ",romaji:"o"},6:{hiragana:"か",katakana:"カ",romaji:"ka"},7:{hiragana:"き",katakana:"キ",romaji:"ki"},8:{hiragana:"く",katakana:"ク",romaji:"ku"},9:{hiragana:"け",katakana:"ケ",romaji:"ke"},10:{hiragana:"こ",katakana:"コ",romaji:"ko"},11:{hiragana:"さ",katakana:"サ",romaji:"sa"},12:{hiragana:"し",katakana:"シ",romaji:"shi"},13:{hiragana:"す",katakana:"ス",romaji:"su"},14:{hiragana:"せ",katakana:"セ",romaji:"se"},15:{hiragana:"そ",katakana:"ソ",romaji:"so"},16:{hiragana:"た",katakana:"タ",romaji:"ta"},17:{hiragana:"ち",katakana:"チ",romaji:"chi"},18:{hiragana:"つ",katakana:"ツ",romaji:"tsu"},19:{hiragana:"て",katakana:"テ",romaji:"te"},20:{hiragana:"と",katakana:"ト",romaji:"to"},21:{hiragana:"な",katakana:"ナ",romaji:"na"},22:{hiragana:"に",katakana:"ニ",romaji:"ni"},23:{hiragana:"ぬ",katakana:"ヌ",romaji:"nu"},24:{hiragana:"ね",katakana:"ネ",romaji:"ne"},25:{hiragana:"の",katakana:"ノ",romaji:"no"},26:{hiragana:"は",katakana:"ハ",romaji:"ha"},27:{hiragana:"ひ",katakana:"ヒ",romaji:"hi"},28:{hiragana:"ふ",katakana:"フ",romaji:"fu"},29:{hiragana:"へ",katakana:"ヘ",romaji:"he"},30:{hiragana:"ほ",katakana:"ホ",romaji:"ho"},31:{hiragana:"ま",katakana:"マ",romaji:"ma"},32:{hiragana:"み",katakana:"ミ",romaji:"mi"},33:{hiragana:"む",katakana:"ム",romaji:"mu"},34:{hiragana:"め",katakana:"メ",romaji:"me"},35:{hiragana:"も",katakana:"モ",romaji:"mo"},36:{hiragana:"や",katakana:"ヤ",romaji:"ya"},37:{hiragana:"ゆ",katakana:"ユ",romaji:"yu"},38:{hiragana:"よ",katakana:"ヨ",romaji:"yo"},39:{hiragana:"ら",katakana:"ラ",romaji:"ra"},40:{hiragana:"り",katakana:"リ",romaji:"ri"},41:{hiragana:"る",katakana:"ル",romaji:"ru"},42:{hiragana:"れ",katakana:"レ",romaji:"re"},43:{hiragana:"ろ",katakana:"ロ",romaji:"ro"},44:{hiragana:"わ",katakana:"ワ",romaji:"wa"},45:{hiragana:"を",katakana:"ヲ",romaji:"wo"},46:{hiragana:"ん",katakana:"ン",romaji:"n"},47:{hiragana:"が",katakana:"ガ",romaji:"ga"},48:{hiragana:"ぎ",katakana:"ギ",romaji:"gi"},49:{hiragana:"ぐ",katakana:"グ",romaji:"gu"},50:{hiragana:"げ",katakana:"ゲ",romaji:"ge"},51:{hiragana:"ご",katakana:"ゴ",romaji:"go"},52:{hiragana:"ざ",katakana:"ザ",romaji:"za"},53:{hiragana:"じ / ぢ",katakana:"ジ / ヂ",romaji:"ji"},54:{hiragana:"ず / づ",katakana:"ズ / ヅ",romaji:"zu"},55:{hiragana:"ぜ",katakana:"ゼ",romaji:"ze"},56:{hiragana:"ぞ",katakana:"ゾ",romaji:"zo"},57:{hiragana:"だ",katakana:"ダ",romaji:"da"},58:{hiragana:"で",katakana:"デ",romaji:"de"},59:{hiragana:"ど",katakana:"ド",romaji:"do"},60:{hiragana:"ば",katakana:"バ",romaji:"ba"},61:{hiragana:"び",katakana:"ビ",romaji:"bi"},62:{hiragana:"ぶ",katakana:"ブ",romaji:"bu"},63:{hiragana:"べ",katakana:"ベ",romaji:"be"},64:{hiragana:"ぼ",katakana:"ボ",romaji:"bo"},65:{hiragana:"ぱ",katakana:"パ",romaji:"pa"},66:{hiragana:"ぴ",katakana:"ピ",romaji:"pi"},67:{hiragana:"ぷ",katakana:"プ",romaji:"pu"},68:{hiragana:"ぺ",katakana:"ペ",romaji:"pe"},69:{hiragana:"ぽ",katakana:"ポ",romaji:"po"}},Z={1:[V[1],V[2],V[3],V[4],V[5]],2:[V[6],V[7],V[8],V[9],V[10]],3:[V[11],V[12],V[13],V[14],V[15]],4:[V[16],V[17],V[18],V[19],V[20]],5:[V[21],V[22],V[23],V[24],V[25]],6:[V[26],V[27],V[28],V[29],V[30]],7:[V[31],V[32],V[33],V[34],V[35]],8:[V[36],V[37],V[38]],9:[V[39],V[40],V[41],V[42],V[43]],10:[V[44],V[45],V[46]],11:[V[47],V[48],V[49],V[50],V[51]],12:[V[52],V[53],V[54],V[55],V[56]],13:[V[57],V[58],V[59]],14:[V[60],V[61],V[62],V[63],V[64]],15:[V[65],V[66],V[67],V[68],V[69]]};new U(Z).render();var ee=document.getElementById("wrapper");new Y(ee,"hiragana",Z).render(),new Y(ee,"katakana",Z).render()})();